<!DOCTYPE html>
<html lang="en">

<head>
    <title>Doug Slater</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://www.slater.dev/style.css">
    <link rel="stylesheet" href="https://www.slater.dev/color/blue.css">

        <link rel="stylesheet" href="https://www.slater.dev/color/background_dark.css">
    
    <link rel="stylesheet" href="https://www.slater.dev/font-hack-subset.css">

    <meta name="description" content="">

    <meta property="og:description" content="">
    <meta property="og:title" content="Doug Slater">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.slater.dev/a-design-is-a-mold-for-code/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="">
    <meta name="twitter:title" content="Doug Slater">
    <meta property="twitter:domain" content="www.slater.dev">
    <meta property="twitter:url" content="https://www.slater.dev/a-design-is-a-mold-for-code/">

            <link rel="alternate" type="application/rss+xml" title="RSS" href="https://www.slater.dev/rss.xml">
    
        <link rel="shortcut icon" type="image&#x2F;x-icon" href="favicon.ico">
    
    <!-- webmentions -->
    <link rel="webmention" href="https://webmention.io/www.slater.dev/webmention" />

    <script type="text/javascript" src="https://www.slater.dev/webmentions.js"></script>

    <!-- Analytics -->
    <script src="https://cdn.counter.dev/script.js" data-id="ad05f962-0745-473f-9913-4ed948b0a691" data-utcoffset="-5"></script>

    <!-- KaTeX -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>

    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
            onload="renderMathInElement(document.body);"></script>
    
    

</head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="/" style="text-decoration: none;">
                    <div class="logo">
                      
                            Doug Slater
                        
                    </div>
                </a>
            </div>
        </div>

        <h3>Words about code, fitness, family, and theology</h3>

        
        
                <nav class="menu">
            <ul class="menu__inner">
                <li class="active"><a href="https://www.slater.dev">blog</a></li>
            
                <li><a href="https://www.slater.dev/tags">tags</a></li>
            
                <li><a href="https://www.slater.dev/archive">archive</a></li>
            
                <li><a href="https://www.slater.dev/about">about me</a></li>
            
                <li><a href="https://www.slater.dev/links">links</a></li>
            
                <li><a href="https://www.slater.dev/mentions">mentions</a></li>
            </ul>
        </nav>
    
    
        

    </header>
    

    <div class="search-container">
        <input id="search" type="search" placeholder="üîé Search">

        <div class="search-results">
            <div class="search-results__items"></div>
        </div>
    </div>

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://www.slater.dev/a-design-is-a-mold-for-code/">A Design is a Mold for Code</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2024-01-15
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://www.slater.dev/tags/code/">#code</a></span>
    

        
        <div class="post-content">
            <p>I'm always in search of good metaphors for software design. Good or not, here's one:</p>
<blockquote>
<p>A Design is a Mold for Code</p>
</blockquote>
<p>In manufacturing, a mold is a hollow shape that fills with fluid material which expands into the space and sets to form a casting. </p>
<div style="text-align: center; width: 60%; margin: 0 auto;">
  <img src="../img/dall-e-muffin-pan.png"/>
  <p style="font-style: italic">Image: A useful mold. Generated by Dall-E</p>
</div>
<p>Like in manufacturing, code fills the <a href="https://en.wikipedia.org/wiki/Negative_space">negative space</a> of a software design. Over time, code sets and becomes harder to change.</p>
<p>Imagine two engineering teams who independently &quot;fill&quot; (implement) a design, and the design is the set of standards for a web browser. The two implementations are Chrome and Firefox. The two browsers have independent codebases<sup>[<a href="https://www.slater.dev/a-design-is-a-mold-for-code/#notes">1</a>]</sup> which take vastly different shapes, but as far as web standards are concerned, the two are equal. You could switch from Chrome to Firefox (which I <a href="https://www.eff.org/deeplinks/2021/12/chrome-users-beware-manifest-v3-deceitful-and-threatening">recommend</a>) and still browse compliant web pages with no discernible change. </p>
<p>Programmers who also like math sometimes call two pieces of code which can be swapped <a href="https://blog.ploeh.dk/2018/01/08/software-design-isomorphisms/">isomorphic</a> with respect to the spec.</p>
<p>It's important not to reverse the causality: a design causes the work product, not the converse. A mold causes a casting, and a software design causes code. Nevertheless, to some extent, one can go in reverse, i.e. reconstruct a mold from a casting or infer a design from code. </p>
<p>The reconstructed mold might lose some fidelity, like sharp edges or precise dimensions, but it's far worse for code. Looking at code without supplemental information, a new dev can only infer a dim, vague notion of its design. She might even sense the mind(s) behind the design. However, it would be costly if even possible to losslessly reconstruct the design, i.e. to such a fidelity that it could be the basis for an isomorphic implementation.</p>
<p>In pseudocode:</p>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>[Test]
</span><span>fn Reverse_ProducesIsomorphicDesign()
</span><span>    let design1 : ...
</span><span>    let code1 = implement(design1)
</span><span>    let design2 = reverse(code1)
</span><span>    let code2 = implement(design2)
</span><span>    assert(isomorphic(code1, code2)) // Fails
</span></code></pre>
<p>Above: The roundtrip from a design to code back to design is lossy.</p>
<p>There are a few reasons for this:</p>
<ul>
<li>A codebase maybe too large to fit into a dev's head. The codebases for Chrome and Firefox are huge. Like the limited context window of ChatGPT, a human has limited working memory and forgets. Though with time and repetition, knowledge transitions to long-term memory.</li>
<li>It's hard to infer high-level concepts from low-level details. For example, decompiling assembly back to C.</li>
<li>Design and code have a many-to-many relationship.
<ul>
<li>There can be many implementations that satisfy a design.</li>
<li>There can be many designs that result in the same code.</li>
</ul>
</li>
</ul>
<p>This is a problem for software that outlives its creator(s). The software will languish unless knowledge is <a href="https://en.wikipedia.org/wiki/Organizational_memory">retained</a> and <a href="https://en.wikipedia.org/wiki/Bus_factor">replicated</a>.</p>
<p>There are some things developers can do to keep their software alive:</p>
<ul>
<li>Write down the design. Use <a href="https://en.wikipedia.org/wiki/Literate_programming">natural language</a></li>
<li>Make the <a href="https://www.pathsensitive.com/2018/01/the-design-of-software-is-thing-apart.html">design apparent in the code</a></li>
<li>Use <a href="https://www.pathsensitive.com/2022/03/abstraction-not-what-you-think-it-is.html">precise abstractions</a></li>
<li>Use <a href="https://argumatronic.com/posts/2018-09-02-effective-metaphor.html">effective</a> <a href="https://gist.github.com/onlurking/fc5c81d18cfce9ff81bc968a7f342fb1#tacit-knowledge-and-documentation">metaphors</a></li>
<li>Make the code <a href="https://www.oreilly.com/library/view/code-that-fits/9780137464302/">fit in your head</a></li>
</ul>
<hr />
<h2 id="notes">Notes</h2>
<ol>
<li>Firefox and Chrome are not truly independent by this definition. Plenty of people who have worked on one browser have also worked on the other. Moreover, as open source projects, both teams can see the other's code. <a href="https://source.chromium.org/chromium/chromium/src/+/main:">Chromium source</a> and <a href="https://searchfox.org/mozilla-central/source">Firefox source</a> </li>
</ol>

        </div>

        
        <div class="pagination">
            <div class="pagination__title">
                <span class="pagination__title-h">Read other posts:</span>
                <hr />
            </div>
            <div class="pagination__buttons">
                    <span class="button previous">
                        <a href="https://www.slater.dev/reflections-on-a-diy-canova-method-marathon-training-cycle/">
                            <span class="button__icon">‚Üê</span>&nbsp;
                            <span class="button__text">Reflections on a DIY Canova Method Marathon Training Cycle</span>
                        </a>
                    </span>
                
                
                    <span class="button next">
                        <a href="https://www.slater.dev/grounded-programming-pedagogy/">
                            <span class="button__text">Grounded Programming Pedagogy</span>&nbsp;
                            <span class="button__icon">‚Üí</span>
                        </a>
                    </span>
                </div>
        </div>
    
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
            <a href="https://fosstodon.org/@slater" target="_blank" rel="me">Mastodon</a>
            <a href="https://github.com/nref" target="_blank" rel="me">GitHub</a>
            <a href="https://www.linkedin.com/in/slater0/" target="_blank" rel="me">LinkedIn</a>
            <a href="/rss.xml" target="_blank" rel="me">RSS</a>
            <a href="mailto:blog@slater.dev" target="_blank" rel="me">Email</a>
                <div class="copyright">
                        <span>¬© 
    2024
 Doug Slater</span>
                    </div>
            </div>
    </footer>
    

</div>
<script type="text/javascript" src="https://www.slater.dev/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://www.slater.dev/search.js"></script>
</body>

</html>
